$(()=>{appendInexistentScriptButtons(getScriptId(),[{name:'显示区间',visible:!0},{name:'恢复默认',visible:!0}]),eventOnButton('显示区间',async()=>{const e=SillyTavern.chat.length-1,t=await SillyTavern.callGenericPopup(`请输入显示区间 (格式: 0-10, 范围: 0-${e})`,SillyTavern.POPUP_TYPE.INPUT);if(!t)return void toastr.error('未填入有效区间');const[n,r]=t.split('-').map(Number);if(n<0||n>r||r>e)toastr.error('未填入有效区间');else{$('#chat').children().remove();for(let e=n;e<=r;e++)builtin.addOneMessage(SillyTavern.chat[e],{forceId:e}),eventEmit(SillyTavern.chat[e].is_user?tavern_events.USER_MESSAGE_RENDERED:tavern_events.CHARACTER_MESSAGE_RENDERED,e)}}),eventOnButton('恢复默认',SillyTavern.reloadCurrentChat)});