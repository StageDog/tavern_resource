{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/util/common.ts","src://tavern_helper_template/util/script.ts","src://tavern_helper_template/src/酒馆助手/压缩相邻消息/squash.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/酒馆助手/压缩相邻消息/store.ts","src://tavern_helper_template/src/酒馆助手/深度条目排斥器/index.ts"],"sourcesContent":["import { compare } from 'compare-versions';\nimport JSON5 from 'json5';\nimport { jsonrepair } from 'jsonrepair';\nimport { toDotPath } from 'zod/v4/core';\n\nexport function assignInplace<T>(destination: T[], new_array: T[]): T[] {\n  destination.length = 0;\n  destination.push(...new_array);\n  return destination;\n}\n\nexport function chunkBy<T>(array: T[], predicate: (lhs: T, rhs: T) => boolean): T[][] {\n  if (array.length === 0) {\n    return [];\n  }\n\n  const chunks: T[][] = [[array[0]]];\n  for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n    if (predicate(lhs!, rhs!)) {\n      chunks[chunks.length - 1].push(rhs!);\n    } else {\n      chunks.push([rhs!]);\n    }\n  }\n  return chunks;\n}\n\nexport function regexFromString(input: string, replace_macros?: boolean): RegExp | null {\n  if (!input) {\n    return null;\n  }\n  const makeRegex = (pattern: string, flags: string) => {\n    if (replace_macros) {\n      pattern = substitudeMacros(pattern);\n    }\n    return new RegExp(pattern, flags);\n  };\n  try {\n    const match = input.match(/\\/(.+)\\/([a-z]*)/i);\n    if (!match) {\n      return makeRegex(_.escapeRegExp(input), 'i');\n    }\n    if (match[2] && !/^(?!.*?(.).*?\\1)[gmixXsuUAJ]+$/.test(match[3])) {\n      return makeRegex(input, 'i');\n    }\n    let flags = match[2] ?? '';\n    _.pull(flags, 'g');\n    if (flags.indexOf('i') === -1) {\n      flags = flags + 'i';\n    }\n    return makeRegex(match[1], flags);\n  } catch {\n    return null;\n  }\n}\n\nexport function uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport async function checkMinimumVersion(expected: string, title: string) {\n  if (compare(await getTavernHelperVersion(), expected, '<')) {\n    toastr.error(`'${title}' 需要酒馆助手版本 >= '${expected}'`, '版本不兼容');\n  }\n}\n\nexport function prettifyErrorWithInput(error: z.ZodError) {\n  return _([...error.issues])\n    .sortBy(issue => issue.path?.length ?? 0)\n    .flatMap(issue => {\n      const lines = [`✖ ${issue.message}`];\n      if (issue.path?.length) {\n        lines.push(`  → 路径: ${toDotPath(issue.path)}`);\n      }\n      if (issue.input !== undefined) {\n        lines.push(`  → 输入: ${JSON.stringify(issue.input)}`);\n      }\n      return lines;\n    })\n    .join('\\n');\n}\n\nexport function literalYamlify(value: any) {\n  return YAML.stringify(value, { blockQuote: 'literal' });\n}\n\nexport function parseString(content: string): any {\n  let parsed: unknown;\n  try {\n    parsed = YAML.parseDocument(content, { merge: true }).toJS();\n  } catch (yaml_error) {\n    try {\n      parsed = JSON5.parse(content);\n    } catch (json5_error) {\n      try {\n        parsed = JSON.parse(jsonrepair(content));\n      } catch (json_error) {\n        const toError = (error: unknown) => (error instanceof Error ? error.message : String(error));\n        throw new Error(\n          literalYamlify({\n            ['要解析的字符串不是有效的 YAML/JSON 格式']: {\n              字符串内容: content,\n              YAML错误信息: toError(yaml_error),\n              JSON5错误信息: toError(json5_error),\n              尝试修复JSON时的错误信息: toError(json_error),\n            },\n          }),\n        );\n      }\n    }\n  }\n  return parsed;\n}\n","import iframe_srcdoc from './iframe_srcdoc.html';\n\nexport async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle(\n  append_to: JQuery.Selector | JQuery.htmlString | JQuery.TypeOrArray<Element | DocumentFragment> | JQuery = 'head',\n): { destroy: () => void } {\n  const $div = $(`<div>`)\n    .attr('script_id', getScriptId())\n    .append($(`head > style`, document).clone())\n    .appendTo(append_to);\n\n  return {\n    destroy: () => $div.remove(),\n  };\n}\n\nexport function createScriptIdIframe(): JQuery<HTMLIFrameElement> {\n  return $(`<iframe>`).attr({\n    script_id: getScriptId(),\n    frameborder: 0,\n    srcdoc: iframe_srcdoc,\n  }) as JQuery<HTMLIFrameElement>;\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function reloadOnChatChange(): EventOnReturn {\n  let chat_id = SillyTavern.getCurrentChatId();\n  return eventOn(tavern_events.CHAT_CHANGED, new_chat_id => {\n    if (chat_id !== new_chat_id) {\n      chat_id = new_chat_id;\n      window.location.reload();\n    }\n  });\n}\n\nexport function registerAsUniqueScript(id: string): {\n  unregister: () => void;\n  getPreferredScriptId: () => string | undefined;\n  listenPreferenceState: (callback: (perferred_script_id: string) => void) => EventOnReturn;\n} {\n  const script_id = getScriptId();\n  const path = `th_unique_check.${id}`;\n\n  const getPreferredScriptId = () => {\n    const registered_scripts = _.get(window.parent, path, new Set<string>());\n    return _($('#tavern_helper').find('div[data-script-id]').toArray())\n      .map(element => String($(element).attr('data-script-id')))\n      .filter(element => registered_scripts.has(element))\n      .last();\n  };\n\n  _.update(window.parent, path, (value: Set<string> | undefined) => {\n    if (value === undefined) {\n      return new Set([script_id]);\n    }\n    value.add(script_id);\n    return value;\n  });\n  eventEmit(path, getPreferredScriptId());\n\n  return {\n    unregister: () => {\n      _.update(window.parent, path, (value: Set<string> | undefined) => {\n        if (value !== undefined) {\n          value.delete(script_id);\n        }\n        return value;\n      });\n      eventEmit(path, getPreferredScriptId());\n    },\n    getPreferredScriptId,\n    listenPreferenceState: (callback: (enabled_script_id: string) => void) => eventOn(path, callback),\n  };\n}\n","import { assignInplace, chunkBy, regexFromString } from '@util/common';\nimport { registerAsUniqueScript } from '@util/script';\nimport { compare } from 'compare-versions';\nimport { Settings } from './store';\n\ntype Prompt = {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nexport type Separators = {\n  head: InjectionPrompt;\n  deep: InjectionPrompt;\n  tail: InjectionPrompt;\n};\n\nexport function injectSeparators(settings: Settings) {\n  const separators: Readonly<Separators> = Object.freeze({\n    head: {\n      id: `\\0压缩相邻消息-聊天记录开头`,\n      position: 'in_chat',\n      depth: 9999,\n      role: 'assistant',\n      content: `【【压缩相邻消息-聊天记录开头】】`,\n    },\n    deep: {\n      id: `\\xff压缩相邻消息-Dx`,\n      position: 'in_chat',\n      depth: settings.depth_injection.threshold,\n      role: 'system',\n      content: `【【压缩相邻消息-Dx】】`,\n    },\n    tail: {\n      id: `\\xff压缩相邻消息-聊天记录结尾`,\n      position: 'in_chat',\n      depth: 0,\n      role: 'system',\n      content: `【【压缩相邻消息-聊天记录结尾】】`,\n    },\n  } as const);\n\n  const inject = (_type: string, _option: object, dry_run: boolean) => {\n    if (dry_run) {\n      return;\n    }\n    injectPrompts(Object.values(separators));\n  };\n  eventOn(tavern_events.GENERATION_AFTER_COMMANDS, inject);\n\n  return {\n    separators,\n    uninject: () => {\n      eventRemoveListener(tavern_events.GENERATION_AFTER_COMMANDS, inject);\n      uninjectPrompts(Object.values(separators).map(({ id }) => id));\n    },\n  };\n}\n\n//----------------------------------------------------------------------------------------------------------------------\nfunction seperatePrompts(prompts: Prompt[], separators: Separators): Prompt[][] | null {\n  const head_index = prompts.findIndex(({ content }) => content.includes(separators.head.content));\n  const deep_index = prompts.findIndex(({ content }) => content.includes(separators.deep.content));\n  const tail_index = prompts.findIndex(({ content }) => content.includes(separators.tail.content));\n  if (head_index === -1 || deep_index === -1 || tail_index === -1) {\n    return null;\n  }\n\n  const split_with_context = (\n    splitted_before: [string, string],\n    before_index: number,\n    current_index: number,\n    splitter: string,\n  ): [string, string] => {\n    if (before_index !== current_index) {\n      return prompts[current_index].content.split(splitter) as [string, string];\n    }\n    const splitted = splitted_before[1].split(splitter) as [string, string];\n    splitted_before[1] = '';\n    return splitted;\n  };\n\n  const splitted_head = split_with_context(['', ''], -1, head_index, separators.head.content);\n  const splitted_deep = split_with_context(splitted_head, head_index, deep_index, separators.deep.content);\n  const splitted_tail = split_with_context(splitted_deep, deep_index, tail_index, separators.tail.content);\n\n  return [\n    [...prompts.slice(0, head_index), { role: prompts[head_index].role, content: splitted_head[0] }],\n    [\n      { role: prompts[head_index].role, content: splitted_head[1] },\n      ...prompts.slice(head_index + 1, deep_index),\n      { role: prompts[deep_index].role, content: splitted_deep[0] },\n    ],\n    [\n      { role: prompts[deep_index].role, content: splitted_deep[1] },\n      ...prompts.slice(deep_index + 1, tail_index),\n      { role: prompts[tail_index].role, content: splitted_tail[0] },\n    ],\n    [{ role: prompts[tail_index].role, content: splitted_tail[1] }, ...prompts.slice(tail_index + 1)],\n  ];\n}\n\nfunction trimEmptyLines(string: string): string {\n  return _(string)\n    .split('\\n')\n    .dropWhile(line => !line.trim())\n    .dropRightWhile(line => !line.trim())\n    .join('\\n');\n}\n\nfunction rejectEmptyPrompts(prompts: Prompt[]): Prompt[] {\n  return prompts.filter(({ content }) => content.trim() !== '');\n}\n\nfunction squashMessageByRole(prompts: Prompt[], settings: Settings): Prompt[] {\n  return chunkBy(prompts, (lhs, rhs) => lhs.role === rhs.role).map(chunk => ({\n    role: chunk[0].role,\n    content: chunk.map(({ content }) => trimEmptyLines(content)).join(settings.delimiter.value),\n  }));\n}\n\nfunction squashChatHistory(prompts: Prompt[], settings: Settings): Prompt {\n  // TODO: zod encode\n  const system_prefix = substitudeMacros(settings.chat_history.system_prefix);\n  const system_suffix = substitudeMacros(settings.chat_history.system_suffix);\n  const assistant_prefix = substitudeMacros(settings.chat_history.assistant_prefix);\n  const assistant_suffix = substitudeMacros(settings.chat_history.assistant_suffix);\n  const user_prefix = substitudeMacros(settings.chat_history.user_prefix);\n  const user_suffix = substitudeMacros(settings.chat_history.user_suffix);\n  return {\n    role: settings.chat_history.squash_role,\n    content: prompts\n      .map(({ role, content }) => {\n        const trimmed = trimEmptyLines(content);\n        switch (role) {\n          case 'system':\n            return system_prefix + trimmed + system_suffix;\n          case 'assistant':\n            return assistant_prefix + trimmed + assistant_suffix;\n          case 'user':\n            return user_prefix + trimmed + user_suffix;\n        }\n      })\n      .join(settings.delimiter.value),\n  };\n}\n\nfunction listenEvent(settings: Settings, separators: Separators, shouldEnable: () => boolean) {\n  const handlePrompts = ({ prompt }: { prompt: SillyTavern.SendingMessage[] }, dry_run: boolean) => {\n    if (dry_run || !shouldEnable()) {\n      return;\n    }\n\n    if (prompt.some(({ content }) => typeof content !== 'string')) {\n      // TODO: 支持带图片、多媒体的情况\n      return;\n    }\n\n    // @ts-expect-error 类型正确\n    const chunks = seperatePrompts(prompt, separators);\n    if (chunks === null) {\n      return;\n    }\n\n    const { above, below } = settings.depth_injection;\n\n    const applyInjection = (injection_settings: typeof above, from: number, to: number) => {\n      if (!injection_settings.enabled) {\n        return;\n      }\n\n      const isSystemWithoutPlaceholder = (p: Prompt): boolean =>\n        p.role === 'system' &&\n        !(above.enabled && above.type === 'placeholder' && p.content.includes(above.placeholder)) &&\n        !(below.enabled && below.type === 'placeholder' && p.content.includes(below.placeholder));\n\n      const placeholder_content =\n        injection_settings.type === 'placeholder'\n          ? rejectEmptyPrompts(chunks[from])\n              .filter(isSystemWithoutPlaceholder)\n              .map(p => trimEmptyLines(p.content))\n              .join(settings.delimiter.value)\n          : '';\n\n      if (\n        injection_settings.type === 'placeholder' &&\n        _(chunks)\n          .flatten()\n          .some(p => p.content.includes(injection_settings.placeholder))\n      ) {\n        _.remove(chunks[from], isSystemWithoutPlaceholder);\n      } else {\n        const exclude_chunk = _.remove(chunks[from], p => p.role === 'system');\n        chunks[to] = to < from ? _.concat(chunks[to], exclude_chunk) : _.concat(exclude_chunk, chunks[to]);\n      }\n      _(chunks)\n        .flatten()\n        .filter(p => p.content.includes(injection_settings.placeholder))\n        .forEach(p => {\n          p.content = p.content.replaceAll(injection_settings.placeholder, placeholder_content);\n        });\n    };\n    applyInjection(above, 1, 0);\n    applyInjection(below, 2, 3);\n\n    const [head, above_chat_history, below_chat_history, tail] = _(chunks)\n      .map(prompts => rejectEmptyPrompts(prompts))\n      .map(prompts => squashMessageByRole(prompts, settings))\n      .value();\n\n    let result: Prompt[];\n    switch (settings.chat_history.type) {\n      case 'squash_nearby':\n        result = squashMessageByRole(_.concat(head, above_chat_history, below_chat_history, tail), settings);\n        break;\n      case 'squash_into_one':\n        result = _.concat(head, squashChatHistory(_.concat(above_chat_history, below_chat_history), settings), tail);\n        break;\n    }\n\n    assignInplace(prompt, result);\n  };\n  const handlePrompts2 = ({ messages }: { messages: SillyTavern.SendingMessage[] }) => {\n    handlePrompts({ prompt: messages }, false);\n  };\n\n  if (compare(getTavernVersion(), '1.13.4', '>')) {\n    eventOn(tavern_events.GENERATE_AFTER_DATA, handlePrompts);\n  } else {\n    eventOn(tavern_events.CHAT_COMPLETION_SETTINGS_READY, handlePrompts2);\n  }\n\n  const handleStopStringOnStream = (text: string) => {\n    if (!settings.stop_string || !shouldEnable()) {\n      return;\n    }\n    const regex = regexFromString(settings.stop_string, true);\n    if (!regex) {\n      return;\n    }\n    if (regex.test(text)) {\n      SillyTavern.stopGeneration();\n    }\n  };\n  eventOn(tavern_events.STREAM_TOKEN_RECEIVED, handleStopStringOnStream);\n\n  const handleStopStringOnReceived = async (message_id: number | string) => {\n    if (!settings.stop_string || !shouldEnable()) {\n      return;\n    }\n\n    const chat_message = SillyTavern.chat[Number(message_id)];\n\n    const regex = regexFromString(settings.stop_string, true);\n    if (!regex) {\n      return;\n    }\n    const match = chat_message.mes.match(regex);\n    if (match) {\n      chat_message.mes = chat_message.mes.slice(0, match.index);\n      if (chat_message.swipes) {\n        _.set(chat_message, ['swipes', chat_message.swipe_id!], chat_message.mes);\n      }\n      // 与 https://gitgud.io/Monblant/noass 采用相同逻辑而不使用 setChatMessages, 因为 CHARACTER_MESSAGE_RENDERED 将会随后自然触发\n      SillyTavern.updateMessageBlock(Number(message_id), chat_message);\n      await SillyTavern.saveChat();\n    }\n  };\n  eventOn(tavern_events.MESSAGE_RECEIVED, handleStopStringOnReceived);\n\n  return {\n    unlisten: () => {\n      eventRemoveListener(tavern_events.GENERATE_AFTER_DATA, handlePrompts);\n      eventRemoveListener(tavern_events.CHAT_COMPLETION_SETTINGS_READY, handlePrompts2);\n      eventRemoveListener(tavern_events.STREAM_TOKEN_RECEIVED, handleStopStringOnStream);\n      eventRemoveListener(tavern_events.MESSAGE_RECEIVED, handleStopStringOnReceived);\n    },\n  };\n}\n\nexport function initSquash(settings: Settings) {\n  const { unregister, getPreferredScriptId } = registerAsUniqueScript('压缩相邻消息');\n  const { separators, uninject } = injectSeparators(settings);\n  const { unlisten } = listenEvent(settings, separators, () => getPreferredScriptId() === getScriptId());\n  return {\n    destroy: () => {\n      unregister();\n      unlisten();\n      uninject();\n    },\n  };\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = z;","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { registerAsUniqueScript } from '@util/script';\nconst OldSettings = z\n    .object({\n    name: z.string().default('压缩相邻消息'),\n    seperator: z\n        .object({\n        type: z.enum(['space', 'newline', 'double newline', 'custom']).default('double newline'),\n        value: z.string().default('\\n\\n'),\n    })\n        .prefault({})\n        .transform(data => {\n        switch (data.type) {\n            case 'space':\n                data.value = ' ';\n                break;\n            case 'newline':\n                data.value = '\\n';\n                break;\n            case 'double newline':\n                data.value = '\\n\\n';\n                break;\n            case 'custom':\n                break;\n        }\n        return data;\n    }),\n    put_system_injection_after_chat_history: z.boolean().default(false),\n    on_chat_history: z\n        .object({\n        type: z.enum(['mixin', 'seperate', 'squash']).default('squash'),\n        squash_role: z.enum(['user', 'assistant', 'system']).default('assistant'),\n        user_prefix: z.string().default('[{{user}}]\\n'),\n        user_suffix: z.string().default('\\n[/{{user}}]'),\n        assistant_prefix: z.string().default('[剧情]\\n'),\n        assistant_suffix: z.string().default('\\n[/剧情]'),\n        system_prefix: z.string().default('[设定]\\n'),\n        system_suffix: z.string().default('\\n[/设定]'),\n    })\n        .prefault({}),\n    stop_string: z.string().default('<|im_end|>').catch('<|im_end|>'),\n})\n    .transform(data => {\n    return Settings.parse({\n        delimiter: data.seperator,\n        stop_string: data.stop_string,\n        depth_injection: {\n            threshold: 10,\n            above: {\n                enabled: data.put_system_injection_after_chat_history,\n                type: 'exclude',\n                placeholder: `{{压缩相邻消息::above_dx}}`,\n            },\n            below: {\n                enabled: data.put_system_injection_after_chat_history,\n                type: 'exclude',\n                placeholder: `{{压缩相邻消息::below_dx}}`,\n            },\n        },\n        chat_history: {\n            ...data.on_chat_history,\n            type: data.on_chat_history.type === 'squash' ? 'squash_into_one' : 'squash_nearby',\n        },\n    });\n});\nexport const Settings = z\n    .object({\n    delimiter: z\n        .object({\n        type: z.enum(['space', 'newline', 'double newline', 'custom']).default('double newline'),\n        value: z.string().default('\\n\\n'),\n    })\n        .prefault({})\n        .transform(data => {\n        switch (data.type) {\n            case 'space':\n                data.value = ' ';\n                break;\n            case 'newline':\n                data.value = '\\n';\n                break;\n            case 'double newline':\n                data.value = '\\n\\n';\n                break;\n            case 'custom':\n                break;\n        }\n        return data;\n    }),\n    stop_string: z.string().default('<|im_end|>').catch('<|im_end|>'),\n    depth_injection: z\n        .object({\n        threshold: z.number().int().min(1).default(10).catch(10),\n        above: z\n            .object({\n            enabled: z.boolean().default(false),\n            type: z.enum(['exclude', 'placeholder']).default('exclude'),\n            placeholder: z.string().default('{{压缩相邻消息::above_dx}}'),\n        })\n            .prefault({}),\n        below: z\n            .object({\n            enabled: z.boolean().default(false),\n            type: z.enum(['exclude', 'placeholder']).default('exclude'),\n            placeholder: z.string().default('{{压缩相邻消息::below_dx}}'),\n        })\n            .prefault({}),\n    })\n        .prefault({}),\n    chat_history: z\n        .object({\n        type: z.enum(['squash_nearby', 'squash_into_one']).default('squash_into_one'),\n        squash_role: z.enum(['user', 'assistant', 'system']).default('assistant'),\n        user_prefix: z.string().default('[{{user}}]\\n'),\n        user_suffix: z.string().default('\\n[/{{user}}]'),\n        assistant_prefix: z.string().default('[剧情]\\n'),\n        assistant_suffix: z.string().default('\\n[/剧情]'),\n        system_prefix: z.string().default('[设定]\\n'),\n        system_suffix: z.string().default('\\n[/设定]'),\n    })\n        .prefault({}),\n})\n    .prefault({});\nexport const useSettingsStore = defineStore('settings', () => {\n    const variables = getVariables({ type: 'script', script_id: getScriptId() });\n    const settings = ref((_.has(variables, 'seperator') ? OldSettings : Settings).parse(variables));\n    const should_enable = ref(false);\n    registerAsUniqueScript('压缩相邻消息').listenPreferenceState(preferred_script_id => {\n        should_enable.value = preferred_script_id === getScriptId();\n    });\n    watchEffect(() => {\n        insertOrAssignVariables(klona(settings.value), { type: 'script', script_id: getScriptId() });\n    });\n    const useEscapedNewline = (path) => {\n        return computed({\n            get: () => _.get(settings.value, path).replace(/\\n/g, '\\\\n'),\n            set: value => _.set(settings.value, path, value.replace(/\\\\n/g, '\\n')),\n        });\n    };\n    return { settings, should_enable, useEscapedNewline };\n});\n","import { initSquash } from '@/酒馆助手/压缩相邻消息/squash';\nimport { Settings } from '@/酒馆助手/压缩相邻消息/store';\nimport { checkMinimumVersion } from '@util/common';\nimport { loadReadme } from '@util/script';\n\n$(() => {\n  checkMinimumVersion('3.4.17', '深度条目排斥器');\n  loadReadme('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/深度条目排斥器/README.md');\n  const { destroy } = initSquash(\n    Settings.decode({\n      name: '深度排斥器',\n      depth_injection: {\n        above: {\n          enabled: true,\n          type: 'exclude',\n        },\n        below: {\n          enabled: true,\n          type: 'exclude',\n        },\n      },\n      chat_history: {\n        type: 'mixin',\n      },\n    }),\n  );\n  $(window).on('pagehide', () => {\n    destroy();\n  });\n});\n"],"names":["regexFromString","input","replace_macros","makeRegex","pattern","flags","substitudeMacros","RegExp","match","_","escapeRegExp","test","pull","indexOf","registerAsUniqueScript","id","script_id","getScriptId","path","getPreferredScriptId","registered_scripts","get","window","parent","Set","$","find","toArray","map","element","String","attr","filter","has","last","update","value","undefined","add","eventEmit","unregister","delete","listenPreferenceState","callback","eventOn","trimEmptyLines","string","split","dropWhile","line","trim","dropRightWhile","join","rejectEmptyPrompts","prompts","content","squashMessageByRole","settings","array","predicate","length","chunks","lhs","rhs","zip","dropRight","drop","push","chunkBy","role","chunk","delimiter","listenEvent","separators","shouldEnable","handlePrompts","prompt","dry_run","some","head_index","findIndex","includes","head","deep_index","deep","tail_index","tail","split_with_context","splitted_before","before_index","current_index","splitter","splitted","splitted_head","splitted_deep","splitted_tail","slice","seperatePrompts","above","below","depth_injection","applyInjection","injection_settings","from","to","enabled","isSystemWithoutPlaceholder","p","type","placeholder","placeholder_content","flatten","remove","exclude_chunk","concat","forEach","replaceAll","above_chat_history","below_chat_history","result","chat_history","system_prefix","system_suffix","assistant_prefix","assistant_suffix","user_prefix","user_suffix","squash_role","trimmed","squashChatHistory","destination","new_array","handlePrompts2","messages","getTavernVersion","tavern_events","GENERATE_AFTER_DATA","CHAT_COMPLETION_SETTINGS_READY","handleStopStringOnStream","text","stop_string","regex","SillyTavern","stopGeneration","STREAM_TOKEN_RECEIVED","handleStopStringOnReceived","async","message_id","chat_message","chat","Number","mes","index","swipes","set","swipe_id","updateMessageBlock","saveChat","MESSAGE_RECEIVED","unlisten","eventRemoveListener","initSquash","uninject","Object","freeze","position","depth","threshold","inject","_type","_option","injectPrompts","values","GENERATION_AFTER_COMMANDS","uninjectPrompts","injectSeparators","destroy","z","Vue","OldSettings","object","name","default","seperator","enum","prefault","transform","data","put_system_injection_after_chat_history","boolean","on_chat_history","catch","Settings","parse","number","int","min","variables","getVariables","ref","should_enable","preferred_script_id","watchEffect","insertOrAssignVariables","useEscapedNewline","computed","replace","expected","title","getTavernHelperVersion","toastr","error","checkMinimumVersion","url","readme","fetch","ok","readme_text","replaceScriptInfo","loadReadme","decode","on"],"ignoreList":[],"sourceRoot":""}