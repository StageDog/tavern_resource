import{compare as e}from'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';function t(e){$('#range_block_openai :input').prop('disabled',e),$('#openai_settings > div:first-child :input').prop('disabled',e),$('#stream_toggle').prop('disabled',!1),$('#openai_show_thoughts').prop('disabled',!1)}$(async()=>{if(e(await getTavernHelperVersion(),'4.7.0','>='))return;function t(){const e=2e6,t=SillyTavern.chatCompletionSettings;!0===t.max_context_unlocked&&t.openai_max_context===e||($('#oai_max_context_unlocked').prop('checked',!0).trigger('input'),$('#openai_max_context_counter').val(e),$('#openai_max_context').val(e).trigger('input'))}!async function(e){const t=await fetch(e);if(!t.ok)return!1;const n=await t.text();replaceScriptInfo(n)}('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/最大化预设上下文长度/README.md'),t(),eventOn(tavern_events.OAI_PRESET_CHANGED_AFTER,()=>{t()});const n=$('#oai_max_context_unlocked, #openai_max_context, #openai_max_context_counter');n.prop('disabled',!0),$(window).on('pagehide',()=>{n.prop('disabled',!1)})}),$(()=>{const e=$('<div class="margin0 menu_button menu_button_icon interactable" tabindex="0" role="button" style="color: var(--active);">\n<i class="fa-fw fa-solid fa-lock"></i>\n<i class="fa-fw fa-solid fa-unlock hidden!"></i>\n</div>').on('click',function(){$(this).find('.fa-lock').is(':visible')?($(this).css('color',''),t(!1)):($(this).css('color','var(--active)'),t(!0)),$(this).find('.fa-lock').toggleClass('hidden!'),$(this).find('.fa-unlock').toggleClass('hidden!')});t(!0),$('#import_oai_preset').parent().prepend(e),$(window).on('pagehide',()=>{e.remove(),t(!1)})});
//# sourceMappingURL=index.js.map