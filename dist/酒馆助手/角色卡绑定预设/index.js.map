{"version":3,"file":"index.js","mappings":"iEAAA,MAAM,EAA+BA,ECC/BC,EAAW,EAAAD,EAAEE,OAAO,CACtB,SAAU,EAAAF,EAAEG,SAASC,QAAQ,IAAMC,yBAEvCC,EAAE,MCkCKC,eAA0BC,GAC/B,MAAMC,QAAeC,MAAMF,GAC3B,IAAKC,EAAOE,GACV,OAAO,EAET,MAAMC,QAAoBH,EAAOI,OACjCC,kBAAkBF,EAEpB,CDzCIG,CAAW,yFACX,MAAMC,EAAWf,EAASgB,MAAMC,aAAa,CAAEC,KAAM,YACrDC,wBAAwBJ,EAAU,CAAEG,KAAM,WAC1CE,WAAWL,EAAS","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/酒馆助手/角色卡绑定预设/index.ts","src://tavern_helper_template/src/util/tavern.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { loadReadme } from '@/util/tavern';\nconst Settings = z.object({\n    要绑定的预设名称: z.string().default(() => getLoadedPresetName()),\n});\n$(() => {\n    loadReadme('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/角色卡绑定预设/README.md');\n    const settings = Settings.parse(getVariables({ type: 'script' }));\n    insertOrAssignVariables(settings, { type: 'script' });\n    loadPreset(settings.要绑定的预设名称);\n});\n","import { compare } from 'compare-versions';\n\nexport function assignInplace<T>(destination: T[], new_array: T[]): T[] {\n  destination.length = 0;\n  destination.push(...new_array);\n  return destination;\n}\n\nexport function chunkBy<T>(array: T[], predicate: (lhs: T, rhs: T) => boolean): T[][] {\n  if (array.length === 0) {\n    return [];\n  }\n\n  const chunks: T[][] = [[array[0]]];\n  for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n    if (predicate(lhs!, rhs!)) {\n      chunks[chunks.length - 1].push(rhs!);\n    } else {\n      chunks.push([rhs!]);\n    }\n  }\n  return chunks;\n}\n\nexport function uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport async function checkMinimumVersion(expected: string, title: string) {\n  if (compare(await getTavernHelperVersion(), expected, '<')) {\n    toastr.error(`'${title}' 需要酒馆助手版本 >= '${expected}'`, '版本不兼容');\n  }\n}\n\nexport async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle() {\n  if ($(`head > div[script_id=\"${getScriptId()}\"]`).length > 0) {\n    return;\n  }\n  const $div = $(`<div>`).attr('script_id', getScriptId()).append($(`head > style`, document).clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle() {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyScriptIdDiv(): void {\n  $(`div[script_id=\"${getScriptId()}\"]`).remove();\n}\n"],"names":["z","Settings","object","string","default","getLoadedPresetName","$","async","url","readme","fetch","ok","readme_text","text","replaceScriptInfo","loadReadme","settings","parse","getVariables","type","insertOrAssignVariables","loadPreset"],"sourceRoot":""}