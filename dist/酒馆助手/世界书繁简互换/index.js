import{toSimplified as t,toTraditional as n}from'https://testingcf.jsdelivr.net/npm/chinese-simple2traditional/+esm';import'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';async function e(){const t=getLorebooks();let n=null;const e=$('<div>').append('<div><h4><span>请选择你要处理的世界书</span></h4></div>',$('<div>').append($('<select><option value="">--- None ---</option></select>').append(t.map((t,n)=>new Option(t,String(n)))).on('change',async function(){const e=String($(this).val());if(''===e)return void(n=null);const i=t.at(Number(e));n=i??null})));return await SillyTavern.callGenericPopup(e[0],SillyTavern.POPUP_TYPE.CONFIRM)===SillyTavern.POPUP_RESULT.AFFIRMATIVE&&n?n:null}async function i(t,n,e){null!==t&&(await updateLorebookEntriesWith(t,t=>(t.forEach(t=>{t.comment=n(t.comment??''),t.content=n(t.content??''),t.keys=t.keys.map(t=>n(t??'')),t.filters=t.filters.map(t=>n(t??''))}),t)),SillyTavern.callGenericPopup(`已将 '${t}' 完全翻译成${e}`,SillyTavern.POPUP_TYPE.TEXT))}$(()=>{!async function(t){const n=await fetch(t);if(!n.ok)return!1;const e=await n.text();replaceScriptInfo(e)}('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/世界书繁简互换/README.md'),appendInexistentScriptButtons([{name:'将世界书翻译成简体',visible:!0},{name:'将世界书翻译成繁体',visible:!0}]),eventOn(getButtonEvent('将世界书翻译成繁体'),async()=>{await i(await e(),n,'繁体')}),eventOn(getButtonEvent('将世界书翻译成简体'),async()=>{await i(await e(),t,'简体')})});
//# sourceMappingURL=index.js.map