const t=z.object({资源预载:z.string().default('')}),e={type:'script',script_id:getScriptId()};function a(t){return $('<div>').attr('id',`script_preload-${t.title}`).append(t.assets.map(t=>$('<link>').attr('rel','preload').attr('href',t).attr('as','image')))}$(async()=>{const r=function(){const a=t.parse(getVariables(e));return insertVariables(a,e),_(getTavernRegexes()).filter(t=>t.enabled&&t.script_name.includes('预载-')).map(t=>({title:t.script_name.replace('预载-','').replaceAll(/【.+?】/gs,''),content:t.replace_string})).concat([{title:'脚本变量',content:a.资源预载}]).map(({title:t,content:e})=>({title:t,assets:e.split('\n').map(t=>t.trim()).filter(t=>!!t)})).value()}().map(a);!function(t){const e=$('head',window.parent.document);e.find('#script_preload').remove(),e.append(t)}($('<div>').attr('id','script_preload').append(r))});