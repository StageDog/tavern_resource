{"version":3,"file":"index.js","mappings":"AAAA,MAAM,EAA+BA,ECA/BC,EAAW,EAAAD,EAAEE,OAAO,CACtB,KAAM,EAAAF,EAAEG,SAASC,QAAQ,MAEvBC,EAAkB,CAAEC,KAAM,SAAUC,UAAWC,eAoBrDC,EAAE,KACEC,QAAQC,WApBZ,WACI,MAAMC,EAAWX,EAASY,MAAMC,aAAaT,IAE7C,OADAU,gBAAgBH,EAAUP,GACnBW,EAAEC,oBACJC,OAAOC,GAASA,EAAMC,SAAWD,EAAME,YAAYC,SAAS,QAC5DC,IAAIJ,IAAS,CACdK,MAAOL,EAAME,YAAYI,QAAQ,MAAO,IAAIC,WAAW,UAAW,IAClEC,QAASR,EAAMS,kBAEdC,OAAO,CAAC,CAAEL,MAAO,OAAQG,QAASf,EAAS,QAC3CW,IAAI,EAAGC,QAAOG,cAAc,CAC7BH,QACAM,OAAQH,EACHI,MAAM,MACNR,IAAIS,GAASA,EAAMC,QACnBf,OAAOc,KAAWA,MAEtBE,OACT,CAEuBC,GAAiBC,QAAQC,GAAYA,EAASP,OAAOP,IAAIS,GAAS,IAAItB,QAAQ4B,IAC7F,MAAMC,EAAM,IAAIC,MAChBD,EAAIE,OAASH,EACbC,EAAIG,QAAUJ,EACdC,EAAII,IAAMX","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/酒馆助手/资源预载/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","const Settings = z.object({\n    资源预载: z.string().default(''),\n});\nconst variable_option = { type: 'script', script_id: getScriptId() };\nfunction get_prefetches() {\n    const settings = Settings.parse(getVariables(variable_option));\n    insertVariables(settings, variable_option);\n    return _(getTavernRegexes())\n        .filter(regex => regex.enabled && regex.script_name.includes('预载-'))\n        .map(regex => ({\n        title: regex.script_name.replace('预载-', '').replaceAll(/【.+?】/gs, ''),\n        content: regex.replace_string,\n    }))\n        .concat([{ title: '脚本变量', content: settings.资源预载 }])\n        .map(({ title, content }) => ({\n        title,\n        assets: content\n            .split('\\n')\n            .map(asset => asset.trim())\n            .filter(asset => !!asset),\n    }))\n        .value();\n}\n$(() => {\n    Promise.allSettled(get_prefetches().flatMap(prefetch => prefetch.assets.map(asset => new Promise(resolve => {\n        const img = new Image();\n        img.onload = resolve;\n        img.onerror = resolve;\n        img.src = asset;\n    }))));\n});\nexport {};\n"],"names":["z","Settings","object","string","default","variable_option","type","script_id","getScriptId","$","Promise","allSettled","settings","parse","getVariables","insertVariables","_","getTavernRegexes","filter","regex","enabled","script_name","includes","map","title","replace","replaceAll","content","replace_string","concat","assets","split","asset","trim","value","get_prefetches","flatMap","prefetch","resolve","img","Image","onload","onerror","src"],"ignoreList":[],"sourceRoot":""}