import'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';function e(e){const t=$('#macro-replace-disable-toggle, #TH-macro-enabled');t.length>0&&t.prop('checked')!==!e&&t.prop('checked',!e).prop('disabled',!e)[0].dispatchEvent(new Event('click'));const n=$('#pt_enabled');n.length>0&&n.prop('checked')!==e&&n.prop('checked',e).prop('disabled',!e)[0].dispatchEvent(new Event('click'))}$(()=>{!async function(e){const t=await fetch(e);if(!t.ok)return!1;const n=await t.text();replaceScriptInfo(n)}('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/禁用酒馆助手宏和提示词模板/README.md'),e(!1),eventOn(getButtonEvent('禁用酒馆助手宏和提示词模板'),()=>{e(!1)}),eventOn(getButtonEvent('启用酒馆助手宏和提示词模板'),()=>{e(!0)});const t=_.throttle(()=>{const e=getScriptButtons();let t;const n=e.find(e=>'启用酒馆助手宏和提示词模板'===e.name||'禁用酒馆助手宏和提示词模板'===e.name);n?t=n:(t={name:'启用酒馆助手宏和提示词模板',visible:!0},e.push(t));const c=$('#macro-replace-disable-toggle, #TH-macro-enabled').prop('checked');c!==('启用酒馆助手宏和提示词模板'===t.name)&&(t.name=c?'启用酒馆助手宏和提示词模板':'禁用酒馆助手宏和提示词模板',replaceScriptButtons(e))},1e3,{trailing:!1});eventOn(tavern_events.SETTINGS_UPDATED,t),t()}),$(window).on('pagehide',()=>e(!0));