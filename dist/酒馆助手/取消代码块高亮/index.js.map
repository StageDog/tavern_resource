{"version":3,"file":"index.js","mappings":"AAEA,MAAMA,EAAOC,OAAOC,OAAOF,KAErBG,EAA4BH,EAAKI,iBAEvCC,EAAE,MCNKC,eAA0BC,GAC/B,MAAMC,QAAeC,MAAMF,GAC3B,IAAKC,EAAOE,GACV,OAAO,EAET,MAAMC,QAAoBH,EAAOI,OACjCC,kBAAkBF,EAEpB,CDDEG,CAAW,yFAEXd,EAAKI,iBAAmB,OACxBC,EAAE,YACCU,WAAW,oBACXH,KAAK,WACJ,OAAOP,EAAEW,MAAMJ,MACjB,KAGJP,EAAEJ,QAAQgB,GAAG,WAAY,KACvBjB,EAAKI,iBAAmBD,EACxBE,EAAE,YAAYa,KAAK,CAACC,EAAQC,KAC1BpB,EAAKI,iBAAiBgB","sources":["src://tavern_helper_template/src/酒馆助手/取消代码块高亮/index.ts","src://tavern_helper_template/src/util/script.ts"],"sourcesContent":["import { loadReadme } from '@/util/script';\n\nconst hljs = window.parent.hljs;\n\nconst original_highlightElement = hljs.highlightElement;\n\n$(() => {\n  loadReadme('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/取消代码块高亮/README.md');\n\n  hljs.highlightElement = () => {};\n  $('pre code')\n    .removeAttr('data-highlighted')\n    .text(function () {\n      return $(this).text();\n    });\n});\n\n$(window).on('pagehide', () => {\n  hljs.highlightElement = original_highlightElement;\n  $('pre code').each((_index, element) => {\n    hljs.highlightElement(element);\n  });\n});\n","export async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle() {\n  if ($(`head > div[script_id=\"${getScriptId()}\"]`).length > 0) {\n    return;\n  }\n  const $div = $(`<div>`).attr('script_id', getScriptId()).append($(`head > style`, document).clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle() {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyScriptIdDiv(): void {\n  $(`div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function reloadOnChatChange(): EventOnReturn {\n  let chat_id = SillyTavern.getCurrentChatId();\n  return eventOn(tavern_events.CHAT_CHANGED, new_chat_id => {\n    if (chat_id !== new_chat_id) {\n      chat_id = new_chat_id;\n      window.location.reload();\n    }\n  });\n}\n"],"names":["hljs","window","parent","original_highlightElement","highlightElement","$","async","url","readme","fetch","ok","readme_text","text","replaceScriptInfo","loadReadme","removeAttr","this","on","each","_index","element"],"ignoreList":[],"sourceRoot":""}