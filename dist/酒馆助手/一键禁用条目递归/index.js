import'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';$(()=>{var e;!async function(e){const n=await fetch(e);if(!n.ok)return!1;const t=await n.text();replaceScriptInfo(t)}('https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/src/酒馆助手/一键禁用条目递归/README.md'),e=!0,appendInexistentScriptButtons(getScriptId(),[{name:'处理要禁用递归扫描的世界书',visible:e}]),eventOnButton('处理要禁用递归扫描的世界书',async()=>{const e=getLorebooks();let n=null;const t=$('<div>').append('<div><h4><span>请选择你要处理的世界书</span></h4></div>',$('<div>').append($('<select><option value="">--- None ---</option></select>').append(e.map((e,n)=>new Option(e,String(n)))).on('change',async function(){const t=String($(this).val());if(''===t)return void(n=null);const i=e.at(Number(t));n=i??null})));await SillyTavern.callGenericPopup(t[0],SillyTavern.POPUP_TYPE.CONFIRM)===SillyTavern.POPUP_RESULT.AFFIRMATIVE&&n&&(await updateLorebookEntriesWith(n,e=>(e.forEach(e=>{e.exclude_recursion=!0,e.prevent_recursion=!0}),e)),SillyTavern.callGenericPopup(`已禁用 '${n}' 的递归扫描`,SillyTavern.POPUP_TYPE.TEXT))})});
//# sourceMappingURL=index.js.map