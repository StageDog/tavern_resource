import{detailedDiff as e}from'https://testingcf.jsdelivr.net/npm/deep-object-diff/+esm';$(()=>{const t=$('#settings_preset_openai');let n=!1;async function i(i){if(n)return void(n=!1);i.stopImmediatePropagation(),i.stopPropagation();const r=SillyTavern.chatCompletionSettings.preset_settings_openai,o=getPreset('in_use'),s=getPreset(r);if(_.isEqual(o,s))return n=!0,void t.trigger('change');const a=e(s,o),c=t.find(':selected').text(),p=await SillyTavern.callGenericPopup(builtin.renderMarkdown(`'${r}' 预设存在以下内容还未保存, 是否切换成 '${c}' 预设?\n\`\`\`yaml\n${YAML.stringify(_.pickBy(a,e=>!_.isEmpty(e)))}\n\`\`\``),SillyTavern.POPUP_TYPE.CONFIRM,'',{leftAlign:!0,customButtons:['保存并切换'],okButton:'仅切换',cancelButton:'取消',wide:!0});p?(2===p&&await replacePreset(r,o),n=!0,t.trigger('change')):t.find('option').filter(function(){return $(this).text()===r}).prop('selected',!0)}t[0].addEventListener('change',i,{capture:!0}),$(window).on('pagehide',()=>{t[0].removeEventListener('change',i)})});
//# sourceMappingURL=index.js.map