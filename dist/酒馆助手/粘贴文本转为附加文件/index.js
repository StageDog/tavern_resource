const e=z,t=e.z.object({触发字数下限:e.z.number().default(400)});let i;async function n(e){if(!e||0===e.length)return;const t=1===e.length?e[0].name:SillyTavern.t`${e.length} files selected`,i=[...e].reduce((e,t)=>e+t.size,0),n=[...e].map(e=>e.name).join('\n');$('#file_form .file_name').text(t).attr('title',n),$('#file_form .file_size').text(function(e,t=!1,i=1){const n=t?1e3:1024;if(Math.abs(e)<n)return e+' B';const r=t?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];let a=-1;const s=10**i;do{e/=n,++a}while(Math.round(Math.abs(e)*s)/s>=n&&a<r.length-1);return e.toFixed(i)+' '+r[a]}(i)).attr('title',i),$('#file_form').removeClass('displayNone');SillyTavern.getCurrentChatId()&&eventOnce(tavern_events.CHAT_CHANGED,()=>{$('#file_form').trigger('reset')})}function r(e){const r=e.originalEvent;('insertFromPaste'===r.inputType||'insertText'===r.inputType)&&r.data&&r.data.length>(i||(i=t.parse(getVariables({type:'script',script_id:getScriptId()})),insertVariables(i,{type:'script',script_id:getScriptId()})),i).触发字数下限&&(r.preventDefault(),r.stopPropagation(),function(e){const t=new File([e],'pasted.txt'),i=new DataTransfer;i.items.add(t),$('#file_form_input').prop('files',i.files),n(i.files)}(r.data))}$(()=>{const e=$('#send_textarea').first();e.on('beforeinput',r),$(window).on('pagehide',()=>{e.off('beforeinput',r)})});
//# sourceMappingURL=index.js.map