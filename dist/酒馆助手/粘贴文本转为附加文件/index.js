const t=z.object({触发字数下限:z.number().default(400)});let e;function n(n){const i=n.originalEvent;('insertFromPaste'===i.inputType||'insertText'===i.inputType)&&i.data&&i.data.length>(e||(e=t.parse(getVariables({type:'script',script_id:getScriptId()})),insertVariables(e,{type:'script',script_id:getScriptId()})),e).触发字数下限&&(i.preventDefault(),i.stopPropagation(),function(t){const e=new File([t],'text.txt'),n=new DataTransfer;n.items.add(e);const i=$('#file_form_input');i.prop('files',n.files),i[0].dispatchEvent(new Event('change'))}(i.data))}const i=$('#send_textarea').first();$(()=>{i.on('beforeinput',n)}),$(window).on('pagehide',()=>{i.on('beforeinput',n)});