import{klona as t}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var e={};function r(e){eventOn('mag_command_parsed',(r,a)=>{const i=t=>{const n=e.safeParse(t);return!!n.success&&(r.stat_data=n.data,!0)};for(const e of a){const a=t(r.stat_data),c=n(e.args[0]);switch(e.type){case'set':3===e.args.length&&e.args.splice(1,1),_.set(a,c,s(e.args[1])),i(a);break;case'insert':{const r=s(e.args[1]),n=s(e.args.at(-1)),o=t=>{const s=_.get(t,c),a=_.isArray(s);return 2===e.args.length?a?s.push(n):_.assign(s,n):a?s.splice(r,0,n):s[String(r)]=n,i(t)},u=_.get(a,c),f=_.isNil(u);if(!f&&!_.isArray(u)&&!_.isPlainObject(u))continue;if(!f){o(a);continue}const l=_(t(a));o(l.set(c,{}).value())||o(l.set(c,[]).value());break}case'delete':_.unset(a,e.args.map(n)),i(a)}}a.length=0})}function n(t){return t.replace(/^[\\"'` ]*(.*?)[\\"'` ]*$/,'$1')}function s(t){const e=function(t){const e=t.trim();if('true'===e)return!0;if('false'===e)return!1;if('null'===e)return null;if('undefined'===e)return;try{return JSON.parse(e)}catch(t){if(e.startsWith('{')&&e.endsWith('}')||e.startsWith('[')&&e.endsWith(']'))try{const t=new Function(`return ${e};`)();if(_.isObject(t)||Array.isArray(t))return t}catch(t){}}try{return YAML.parse(e)}catch(t){}return n(t)}(t);return e instanceof Date?e.toISOString():Array.isArray(e)?e.map(t=>t instanceof Date?t.toISOString():t):e}e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);export{r as registerMvuSchema};
//# sourceMappingURL=mvu_zod.js.map