async function t(t){const e=await fetch(t);if(!e.ok)return!1;const r=await e.text();return replaceScriptInfo(r),!0}function e(t='head'){const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(t);return{destroy:()=>e.remove()}}function r(){return $('<iframe>').attr({script_id:getScriptId(),frameborder:0,srcdoc:'<!DOCTYPE html> <html> <head> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/lib/tailwindcss.min.js"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui/dist/jquery-ui.min.js"><\/script> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/jquery-ui/themes/base/theme.min.css"/> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui-touch-punch"><\/script> <script src="https://testingcf.jsdelivr.net/npm/lodash"><\/script> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/src/iframe/adjust_iframe_height.js"><\/script> <style>*,::after,::before{box-sizing:border-box}body,html{margin:0!important;padding:0;overflow:hidden!important;max-width:100%!important}</style> </head> <html> </html></html>'})}function n(){return $('<div>').attr('script_id',getScriptId())}function i(){let t=SillyTavern.getCurrentChatId();return eventOn(tavern_events.CHAT_CHANGED,e=>{t!==e&&(t=e,window.location.reload())})}function s(t){const e=getScriptId(),r=`th_unique_check.${t}`,n=()=>{const t=_.get(window.parent,r,new Set);return _($('#tavern_helper').find('div[data-script-id]').toArray()).map(t=>String($(t).attr('data-script-id'))).filter(e=>t.has(e)).last()};return _.update(window.parent,r,t=>void 0===t?new Set([e]):(t.add(e),t)),eventEmit(r,n()),{unregister:()=>{_.update(window.parent,r,t=>(void 0!==t&&t.delete(e),t)),eventEmit(r,n())},getPreferredScriptId:n,listenPreferenceState:t=>eventOn(r,t)}}export{n as createScriptIdDiv,r as createScriptIdIframe,t as loadReadme,s as registerAsUniqueScript,i as reloadOnChatChange,e as teleportStyle};
//# sourceMappingURL=script.js.map