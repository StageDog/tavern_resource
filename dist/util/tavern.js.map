{"version":3,"file":"tavern.js","mappings":"mFACA,IAAIA,EAAsB,CAAC,ECCpB,SAASC,EAAiBC,EAAkBC,GAGjD,OAFAD,EAAYE,OAAS,EACrBF,EAAYG,QAAQF,GACbD,CACT,CAEO,SAASI,EAAWC,EAAYC,GACrC,GAAqB,IAAjBD,EAAMH,OACR,MAAO,GAGT,MAAMK,EAAgB,CAAC,CAACF,EAAM,KAC9B,IAAK,MAAOG,EAAKC,KAAQC,EAAEC,IAAID,EAAEE,UAAUP,GAAQK,EAAEG,KAAKR,IACpDC,EAAUE,EAAMC,GAClBF,EAAOA,EAAOL,OAAS,GAAGC,KAAKM,GAE/BF,EAAOJ,KAAK,CAACM,IAGjB,OAAOF,CACT,CAEO,SAASO,IACd,MAAO,uCAAuCC,QAAQ,QAAS,SAAUC,GACvE,MAAMC,EAAqB,GAAhBC,KAAKC,SAAiB,EAEjC,OADgB,MAANH,EAAYC,EAAS,EAAJA,EAAW,GAC7BG,SAAS,GACpB,EACF,CAEOC,eAAeC,EAAoBC,EAAkBC,GACtD,QAAcC,yBAA0BF,EAAU,MACpDG,OAAOC,MAAM,IAAIH,mBAAuBD,KAAa,QAEzD,CAEOF,eAAeO,EAAWC,GAC/B,MAAMC,QAAeC,MAAMF,GAC3B,IAAKC,EAAOE,GACV,OAAO,EAET,MAAMC,QAAoBH,EAAOI,OAEjC,OADAC,kBAAkBF,IACX,CACT,CAEO,SAASG,IACd,GAAIC,EAAE,yBAAyBC,mBAAmBpC,OAAS,EACzD,OAEF,MAAMqC,EAAOF,EAAE,SAASG,KAAK,YAAaF,eAAeG,OAAOJ,EAAE,eAAgBK,UAAUC,SAC5FN,EAAE,QAAQI,OAAOF,EACnB,CAEO,SAASK,IACdP,EAAE,yBAAyBC,mBAAmBO,QAChD,CAEO,SAASC,IACd,OAAOT,EAAE,SAASG,KAAK,YAAaF,cACtC,CAEO,SAASS,IACdV,EAAE,kBAAkBC,mBAAmBO,QACzC,CCjEA/C,EAAoBkD,EAAI,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXpD,EAAoBsD,EAAEF,EAAYC,KAASrD,EAAoBsD,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ErD,EAAoBsD,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,U","sources":["src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/src/util/tavern.ts","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","import { compare } from 'compare-versions';\n\nexport function assignInplace<T>(destination: T[], new_array: T[]): T[] {\n  destination.length = 0;\n  destination.push(...new_array);\n  return destination;\n}\n\nexport function chunkBy<T>(array: T[], predicate: (lhs: T, rhs: T) => boolean): T[][] {\n  if (array.length === 0) {\n    return [];\n  }\n\n  const chunks: T[][] = [[array[0]]];\n  for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n    if (predicate(lhs!, rhs!)) {\n      chunks[chunks.length - 1].push(rhs!);\n    } else {\n      chunks.push([rhs!]);\n    }\n  }\n  return chunks;\n}\n\nexport function uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport async function checkMinimumVersion(expected: string, title: string) {\n  if (compare(await getTavernHelperVersion(), expected, '<')) {\n    toastr.error(`'${title}' 需要酒馆助手版本 >= '${expected}'`, '版本不兼容');\n  }\n}\n\nexport async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle() {\n  if ($(`head > div[script_id=\"${getScriptId()}\"]`).length > 0) {\n    return;\n  }\n  const $div = $(`<div>`).attr('script_id', getScriptId()).append($(`head > style`, document).clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle() {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyScriptIdDiv(): void {\n  $(`div[script_id=\"${getScriptId()}\"]`).remove();\n}\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"names":["__webpack_require__","assignInplace","destination","new_array","length","push","chunkBy","array","predicate","chunks","lhs","rhs","_","zip","dropRight","drop","uuidv4","replace","c","r","Math","random","toString","async","checkMinimumVersion","expected","title","getTavernHelperVersion","toastr","error","loadReadme","url","readme","fetch","ok","readme_text","text","replaceScriptInfo","teleportStyle","$","getScriptId","$div","attr","append","document","clone","deteleportStyle","remove","createScriptIdDiv","destroyScriptIdDiv","d","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}